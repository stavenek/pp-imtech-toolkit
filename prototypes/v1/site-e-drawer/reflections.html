<!DOCTYPE html>
<html lang="sv" data-theme="light">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Reflektioner - Integral Teamwork Toolkit</title>
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{--bg-primary:#ffffff;--bg-secondary:#f5f5f7;--bg-tertiary:#ebebed;--bg-sidebar:#1d1d1f;--text-primary:#1d1d1f;--text-secondary:#86868b;--text-sidebar:#f5f5f7;--border:#d2d2d7;--border-light:#e8e8ed;--accent:#0071e3;--accent-hover:#0077ed;--accent-light:rgba(0,113,227,0.08);--success:#34c759;--warning:#ff9f0a;--error:#ff3b30;--space-xs:4px;--space-sm:8px;--space-md:16px;--space-lg:24px;--space-xl:32px;--space-2xl:48px;--radius-sm:8px;--radius-md:12px;--radius-lg:16px;--radius-xl:20px;--radius-full:9999px;--shadow-sm:0 1px 3px rgba(0,0,0,0.06);--shadow-md:0 4px 16px rgba(0,0,0,0.08);--shadow-drawer:-4px 0 24px rgba(0,0,0,0.1);--sidebar-width:68px;--font-family:-apple-system,BlinkMacSystemFont,'SF Pro Display','Segoe UI',Roboto,sans-serif}
[data-theme="dark"]{--bg-primary:#1c1c1e;--bg-secondary:#2c2c2e;--bg-tertiary:#3a3a3c;--bg-sidebar:#000000;--text-primary:#f5f5f7;--text-secondary:#98989d;--border:#48484a;--border-light:#38383a;--accent:#0a84ff;--accent-hover:#409cff}
body{font-family:var(--font-family);background:var(--bg-secondary);color:var(--text-primary);line-height:1.5;display:flex;min-height:100vh}
a{color:inherit;text-decoration:none}
.skip-link{position:absolute;top:-100%;left:var(--space-md);background:var(--accent);color:#fff;padding:var(--space-sm) var(--space-md);border-radius:var(--radius-full);z-index:1000;font-size:14px;transition:top 0.2s ease}
.skip-link:focus{top:var(--space-md)}
.sidebar{width:var(--sidebar-width);min-height:100vh;background:var(--bg-sidebar);display:flex;flex-direction:column;align-items:center;padding:var(--space-md) 0;position:fixed;top:0;left:0;z-index:100}
.sidebar-logo{width:36px;height:36px;background:var(--accent);border-radius:var(--radius-sm);display:flex;align-items:center;justify-content:center;margin-bottom:var(--space-lg)}
.sidebar-logo svg{width:20px;height:20px;fill:#fff}
.sidebar-nav{display:flex;flex-direction:column;gap:var(--space-xs);flex:1;width:100%;padding:0 var(--space-sm)}
.sidebar-nav a{width:52px;height:52px;display:flex;align-items:center;justify-content:center;border-radius:var(--radius-md);transition:background 0.2s ease,opacity 0.2s ease;opacity:0.4;position:relative;margin:0 auto}
.sidebar-nav a:hover,.sidebar-nav a:focus-visible{opacity:0.7;background:rgba(255,255,255,0.08)}
.sidebar-nav a.active{opacity:1;background:rgba(255,255,255,0.12)}
.sidebar-nav a svg{width:22px;height:22px;fill:var(--text-sidebar)}
.sidebar-nav a .tooltip{position:absolute;left:calc(100% + 12px);top:50%;transform:translateY(-50%);background:var(--bg-primary);color:var(--text-primary);padding:6px 12px;border-radius:var(--radius-sm);font-size:13px;white-space:nowrap;box-shadow:var(--shadow-md);opacity:0;pointer-events:none;transition:opacity 0.2s ease;z-index:200}
.sidebar-nav a:hover .tooltip,.sidebar-nav a:focus-visible .tooltip{opacity:1}
.sidebar-bottom{padding:var(--space-sm);width:100%;display:flex;flex-direction:column;align-items:center;gap:var(--space-sm)}
.theme-toggle{width:44px;height:44px;display:flex;align-items:center;justify-content:center;border:none;background:rgba(255,255,255,0.08);border-radius:var(--radius-md);cursor:pointer;transition:background 0.2s ease}
.theme-toggle:hover{background:rgba(255,255,255,0.15)}
.theme-toggle svg{width:20px;height:20px;fill:var(--text-sidebar)}

.layout{margin-left:var(--sidebar-width);flex:1;display:flex;min-height:100vh}
.main-content{flex:1;padding:var(--space-xl) var(--space-2xl);max-width:960px}
.page-header{margin-bottom:var(--space-xl);display:flex;align-items:flex-start;justify-content:space-between}
.page-header div h1{font-size:28px;font-weight:700;letter-spacing:-0.5px;margin-bottom:var(--space-xs)}
.page-header div p{color:var(--text-secondary);font-size:15px}
.pill-btn{display:inline-flex;align-items:center;gap:var(--space-sm);padding:10px 20px;border-radius:var(--radius-full);background:var(--accent);color:#fff;border:none;font-size:14px;font-weight:500;cursor:pointer;transition:background 0.2s ease,transform 0.1s ease;font-family:var(--font-family);min-height:44px}
.pill-btn:hover{background:var(--accent-hover)}
.pill-btn:active{transform:scale(0.98)}
.pill-btn.secondary{background:var(--bg-primary);color:var(--text-primary);border:1px solid var(--border)}
.pill-btn.secondary:hover{background:var(--bg-secondary)}
.pill-btn svg{width:16px;height:16px;fill:currentColor}

.section-title{font-size:18px;font-weight:600;margin-bottom:var(--space-md)}

/* Reflections List */
.reflection-list{background:var(--bg-primary);border-radius:var(--radius-lg);border:1px solid var(--border-light);overflow:hidden;margin-bottom:var(--space-xl)}
.reflection-item{display:flex;align-items:flex-start;gap:var(--space-md);padding:var(--space-md) var(--space-lg);border-bottom:1px solid var(--border-light);cursor:pointer;transition:background 0.15s ease}
.reflection-item:last-child{border-bottom:none}
.reflection-item:hover{background:var(--accent-light)}
.reflection-item.selected{background:var(--accent-light);border-left:3px solid var(--accent)}
.reflection-date{flex-shrink:0;text-align:center;min-width:50px}
.reflection-date .day{font-size:22px;font-weight:700;line-height:1}
.reflection-date .month{font-size:11px;color:var(--text-secondary);text-transform:uppercase;letter-spacing:0.5px;margin-top:2px}
.reflection-info{flex:1}
.reflection-info h3{font-size:15px;font-weight:500;margin-bottom:4px}
.reflection-info p{font-size:13px;color:var(--text-secondary);display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}
.reflection-meeting{font-size:12px;color:var(--accent);font-weight:500;background:var(--accent-light);padding:2px 10px;border-radius:var(--radius-full);white-space:nowrap;align-self:center}

/* Teamwork Rules */
.rules-card{background:var(--bg-primary);border-radius:var(--radius-lg);border:1px solid var(--border-light);padding:var(--space-lg)}
.rules-card h3{font-size:16px;font-weight:600;margin-bottom:var(--space-md)}
.rule-item{display:flex;align-items:flex-start;gap:var(--space-sm);padding:var(--space-sm) 0;font-size:14px;line-height:1.5}
.rule-bullet{width:6px;height:6px;border-radius:50%;background:var(--accent);flex-shrink:0;margin-top:7px}
.rules-edit-btn{margin-top:var(--space-md)}

/* Drawer */
.drawer-overlay{position:fixed;top:0;right:0;bottom:0;left:var(--sidebar-width);background:rgba(0,0,0,0.2);z-index:50;opacity:0;pointer-events:none;transition:opacity 0.3s ease}
.drawer-overlay.open{opacity:1;pointer-events:auto}
.drawer{position:fixed;top:0;right:0;width:520px;height:100vh;background:var(--bg-primary);box-shadow:var(--shadow-drawer);z-index:60;transform:translateX(100%);transition:transform 0.3s ease;display:flex;flex-direction:column;overflow:hidden}
.drawer.open{transform:translateX(0)}
.drawer-header{display:flex;align-items:center;justify-content:space-between;padding:var(--space-lg);border-bottom:1px solid var(--border-light)}
.drawer-header h2{font-size:18px;font-weight:600}
.drawer-close{width:44px;height:44px;display:flex;align-items:center;justify-content:center;border:none;background:var(--bg-secondary);border-radius:50%;cursor:pointer;transition:background 0.2s ease}
.drawer-close:hover{background:var(--bg-tertiary)}
.drawer-close svg{width:18px;height:18px;fill:var(--text-primary)}
.drawer-body{flex:1;padding:var(--space-lg);overflow-y:auto}
.drawer-footer{padding:var(--space-md) var(--space-lg);border-top:1px solid var(--border-light);display:flex;gap:var(--space-sm);justify-content:flex-end}
.form-field{margin-bottom:var(--space-lg)}
.form-field label{display:block;font-size:13px;font-weight:600;color:var(--text-secondary);margin-bottom:var(--space-sm);text-transform:uppercase;letter-spacing:0.5px}
.form-field textarea{width:100%;min-height:150px;padding:var(--space-md);border:1px solid var(--border);border-radius:var(--radius-md);font-family:var(--font-family);font-size:15px;line-height:1.7;color:var(--text-primary);background:var(--bg-primary);resize:vertical;transition:border-color 0.2s ease}
.form-field textarea:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 3px var(--accent-light)}
.form-field input{width:100%;padding:var(--space-sm) var(--space-md);border:1px solid var(--border);border-radius:var(--radius-md);font-family:var(--font-family);font-size:15px;color:var(--text-primary);background:var(--bg-primary);min-height:44px;transition:border-color 0.2s ease}
.form-field input:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 3px var(--accent-light)}

.field{margin-bottom:var(--space-lg)}
.field label{display:block;font-size:13px;font-weight:600;color:var(--text-secondary);margin-bottom:var(--space-xs);text-transform:uppercase;letter-spacing:0.5px}
.field-value{font-size:15px;line-height:1.7}
</style>
</head>
<body>

<a href="#main" class="skip-link">Hoppa till huvudinneh&aring;ll</a>

<nav class="sidebar" aria-label="Huvudnavigering">
  <div class="sidebar-logo" aria-hidden="true"><svg viewBox="0 0 24 24"><path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/></svg></div>
  <div class="sidebar-nav" role="list">
    <a href="index.html" role="listitem" aria-label="Dashboard"><svg viewBox="0 0 24 24"><path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"/></svg><span class="tooltip">Dashboard</span></a>
    <a href="agenda.html" role="listitem" aria-label="Agenda"><svg viewBox="0 0 24 24"><path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM9 10H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2z"/></svg><span class="tooltip">Agenda</span></a>
    <a href="strategic.html" role="listitem" aria-label="Strategiskt resonemang"><svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/></svg><span class="tooltip">Strategiskt resonemang</span></a>
    <a href="desired-state.html" role="listitem" aria-label="&Ouml;nskat l&auml;ge"><svg viewBox="0 0 24 24"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg><span class="tooltip">&Ouml;nskat l&auml;ge</span></a>
    <a href="goals-metrics.html" role="listitem" aria-label="M&aring;l &amp; M&auml;tetal"><svg viewBox="0 0 24 24"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/></svg><span class="tooltip">M&aring;l &amp; M&auml;tetal</span></a>
    <a href="action-plan.html" role="listitem" aria-label="Handlingsplan"><svg viewBox="0 0 24 24"><path d="M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zm-1 7V3.5L18.5 9H13zM7 13h10v2H7v-2zm0 4h7v2H7v-2z"/></svg><span class="tooltip">Handlingsplan</span></a>
    <a href="documents.html" role="listitem" aria-label="Dokument"><svg viewBox="0 0 24 24"><path d="M20 6h-8l-2-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 12H4V8h16v10z"/></svg><span class="tooltip">Dokument</span></a>
    <a href="attendance.html" role="listitem" aria-label="N&auml;rvaro"><svg viewBox="0 0 24 24"><path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/></svg><span class="tooltip">N&auml;rvaro</span></a>
    <a href="reflections.html" class="active" role="listitem" aria-label="Reflektioner" aria-current="page"><svg viewBox="0 0 24 24"><path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z"/></svg><span class="tooltip">Reflektioner</span></a>
    <a href="newsflash.html" role="listitem" aria-label="Nyheter"><svg viewBox="0 0 24 24"><path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 14H4V8l8 5 8-5v10zm-8-7L4 6h16l-8 5z"/></svg><span class="tooltip">Nyheter</span></a>
    <a href="admin.html" role="listitem" aria-label="Admin"><svg viewBox="0 0 24 24"><path d="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 00.12-.61l-1.92-3.32a.49.49 0 00-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 00-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96a.49.49 0 00-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.07.62-.07.94s.02.64.07.94l-2.03 1.58a.49.49 0 00-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"/></svg><span class="tooltip">Admin</span></a>
  </div>
  <div class="sidebar-bottom"><button class="theme-toggle" onclick="toggleTheme()" aria-label="V&auml;xla tema"><svg viewBox="0 0 24 24"><path d="M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1z"/></svg></button></div>
</nav>

<div class="layout">
  <main class="main-content" id="main">
    <header class="page-header">
      <div>
        <h1>Reflektioner &amp; l&auml;rdomar</h1>
        <p>Teamets samlade reflektioner fr&aring;n m&ouml;ten och projektarbete</p>
      </div>
      <button class="pill-btn" onclick="openNewReflection()">
        <svg viewBox="0 0 24 24"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/></svg>
        Ny reflektion
      </button>
    </header>

    <h2 class="section-title">Reflektioner</h2>
    <div class="reflection-list">
      <div class="reflection-item" onclick="openDrawer(this,'r1')">
        <div class="reflection-date"><div class="day">23</div><div class="month">Jan</div></div>
        <div class="reflection-info">
          <h3>Bra framsteg p&aring; kundkommunikation</h3>
          <p>Vi har sett positiva resultat av v&aring;ra insatser f&ouml;r att f&ouml;rb&auml;ttra kundkommunikationen. NPS har &ouml;kat med 8 po&auml;ng sedan f&ouml;rra m&auml;tningen. Teamet har varit engagerat i att svara snabbare p&aring; kundförfrågningar.</p>
        </div>
        <span class="reflection-meeting">M&ouml;te 24</span>
      </div>
      <div class="reflection-item" onclick="openDrawer(this,'r2')">
        <div class="reflection-date"><div class="day">9</div><div class="month">Jan</div></div>
        <div class="reflection-info">
          <h3>Utmaning med ledtider</h3>
          <p>Vi diskuterade utmaningarna med att minska ledtiderna. Huvudproblemet &auml;r beroenden mellan avdelningar. Vi beh&ouml;ver hitta b&auml;ttre s&auml;tt att koordinera v&aring;rt arbete tvärfunktionellt.</p>
        </div>
        <span class="reflection-meeting">M&ouml;te 23</span>
      </div>
      <div class="reflection-item" onclick="openDrawer(this,'r3')">
        <div class="reflection-date"><div class="day">19</div><div class="month">Dec</div></div>
        <div class="reflection-info">
          <h3>Kunskapsdelning fungerar bra</h3>
          <p>De veckovisa kunskapsdelningssessionerna har blivit popul&auml;ra. Teammedlemmarna uppskattar m&ouml;jligheten att l&auml;ra sig av varandra och det har st&auml;rkt sammanh&aring;llningen i teamet.</p>
        </div>
        <span class="reflection-meeting">M&ouml;te 22</span>
      </div>
      <div class="reflection-item" onclick="openDrawer(this,'r4')">
        <div class="reflection-date"><div class="day">5</div><div class="month">Dec</div></div>
        <div class="reflection-info">
          <h3>Workshop-uppf&ouml;ljning</h3>
          <p>Uppf&ouml;ljning av strategiworkshopen. Vi har identifierat tre konkreta &aring;tg&auml;rder som vi ska fokusera p&aring; under Q1 2026. Teamet k&auml;nner sig motiverat och har en tydlig riktning.</p>
        </div>
        <span class="reflection-meeting">M&ouml;te 21</span>
      </div>
    </div>

    <h2 class="section-title">Teamets spelregler</h2>
    <div class="rules-card">
      <h3>V&aring;ra &ouml;verenskomna regler</h3>
      <div class="rule-item"><div class="rule-bullet"></div><div>Vi respekterar varandras tid och kommer f&ouml;rberedda till m&ouml;ten</div></div>
      <div class="rule-item"><div class="rule-bullet"></div><div>Vi ger konstruktiv feedback och tar emot den med &ouml;ppenhet</div></div>
      <div class="rule-item"><div class="rule-bullet"></div><div>Vi kommunicerar &ouml;ppet och transparent &mdash; inga dolda agendor</div></div>
      <div class="rule-item"><div class="rule-bullet"></div><div>Vi st&ouml;djer varandra och firar framg&aring;ngar tillsammans</div></div>
      <div class="rule-item"><div class="rule-bullet"></div><div>Vi h&aring;ller deadlines och kommunicerar tidigt om f&ouml;rseningar</div></div>
      <div class="rule-item"><div class="rule-bullet"></div><div>Vi lyssnar aktivt och l&aring;ter alla komma till tals</div></div>
      <div class="rules-edit-btn">
        <button class="pill-btn secondary" onclick="openRulesDrawer()">
          <svg viewBox="0 0 24 24"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/></svg>
          Redigera spelregler
        </button>
      </div>
    </div>
  </main>
</div>

<div class="drawer-overlay" id="drawerOverlay" onclick="closeDrawer()"></div>
<aside class="drawer" id="drawer" role="dialog" aria-label="Reflektion">
  <div class="drawer-header">
    <h2 id="drawerTitle">Reflektion</h2>
    <button class="drawer-close" onclick="closeDrawer()" aria-label="St&auml;ng panel"><svg viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg></button>
  </div>
  <div class="drawer-body" id="drawerBody"></div>
  <div class="drawer-footer" id="drawerFooter">
    <button class="pill-btn secondary" onclick="closeDrawer()">St&auml;ng</button>
  </div>
</aside>

<script>
const reflData = {
  r1:{title:'Bra framsteg p&aring; kundkommunikation',meeting:'M&ouml;te 24',date:'23 januari 2026',text:'Vi har sett positiva resultat av v&aring;ra insatser f&ouml;r att f&ouml;rb&auml;ttra kundkommunikationen. NPS har &ouml;kat med 8 po&auml;ng sedan f&ouml;rra m&auml;tningen.\n\nTeamet har varit engagerat i att svara snabbare p&aring; kundförfrågningar och vi har inf&ouml;rt en rutin f&ouml;r att f&ouml;lja upp alla &auml;renden inom 24 timmar.\n\nVi beslutade att forts&auml;tta med denna satsning och ut&ouml;ka den till att ocks&aring; omfatta proaktiv kommunikation med nyckelkunder.'},
  r2:{title:'Utmaning med ledtider',meeting:'M&ouml;te 23',date:'9 januari 2026',text:'Vi diskuterade utmaningarna med att minska ledtiderna. Huvudproblemet &auml;r beroenden mellan avdelningar.\n\nVi identifierade tre flaskhalsar:\n1. V&auml;ntetid p&aring; godk&auml;nnanden fr&aring;n produktteamet\n2. Manuella processer som kan automatiseras\n3. Bristande kommunikation vid &ouml;verl&auml;mningar\n\nVi beh&ouml;ver hitta b&auml;ttre s&auml;tt att koordinera v&aring;rt arbete tvärfunktionellt.'},
  r3:{title:'Kunskapsdelning fungerar bra',meeting:'M&ouml;te 22',date:'19 december 2025',text:'De veckovisa kunskapsdelningssessionerna har blivit popul&auml;ra. Teammedlemmarna uppskattar m&ouml;jligheten att l&auml;ra sig av varandra.\n\nKunskapsindexet har &ouml;kat fr&aring;n 60 till 75, vilket visar att initiativet ger resultat. Vi planerar att bjuda in externa talare n&auml;sta kvartal.'},
  r4:{title:'Workshop-uppf&ouml;ljning',meeting:'M&ouml;te 21',date:'5 december 2025',text:'Uppf&ouml;ljning av strategiworkshopen. Vi har identifierat tre konkreta &aring;tg&auml;rder f&ouml;r Q1 2026:\n\n1. F&ouml;rb&auml;ttra onboarding-processen\n2. Implementera kundenkät\n3. Veckovis kunskapsdelning\n\nTeamet k&auml;nner sig motiverat och har en tydlig riktning.'}
};

let currentItem=null;

function openDrawer(el,id){
  const r=reflData[id];if(!r)return;
  document.querySelectorAll('.reflection-item').forEach(i=>i.classList.remove('selected'));
  el.classList.add('selected');currentItem=el;
  document.getElementById('drawerTitle').innerHTML=r.title;
  document.getElementById('drawerBody').innerHTML=`
    <div class="field"><label>M&ouml;te</label><div class="field-value">${r.meeting}</div></div>
    <div class="field"><label>Datum</label><div class="field-value">${r.date}</div></div>
    <div class="field"><label>Reflektion</label><div class="field-value" style="white-space:pre-line">${r.text}</div></div>
  `;
  document.getElementById('drawerFooter').innerHTML='<button class="pill-btn secondary" onclick="closeDrawer()">St&auml;ng</button>';
  document.getElementById('drawer').classList.add('open');
  document.getElementById('drawerOverlay').classList.add('open');
}

function openNewReflection(){
  document.querySelectorAll('.reflection-item').forEach(i=>i.classList.remove('selected'));
  document.getElementById('drawerTitle').innerHTML='Ny reflektion';
  document.getElementById('drawerBody').innerHTML=`
    <div class="form-field"><label for="refTitle">Rubrik</label><input type="text" id="refTitle" placeholder="Skriv en rubrik..."></div>
    <div class="form-field"><label for="refMeeting">M&ouml;te</label><input type="text" id="refMeeting" placeholder="t.ex. M&ouml;te 25"></div>
    <div class="form-field"><label for="refText">Reflektion</label><textarea id="refText" placeholder="Skriv er reflektion h&auml;r..." style="min-height:200px"></textarea></div>
  `;
  document.getElementById('drawerFooter').innerHTML='<button class="pill-btn secondary" onclick="closeDrawer()">Avbryt</button><button class="pill-btn" onclick="closeDrawer()"><svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg>Spara</button>';
  document.getElementById('drawer').classList.add('open');
  document.getElementById('drawerOverlay').classList.add('open');
}

function openRulesDrawer(){
  document.querySelectorAll('.reflection-item').forEach(i=>i.classList.remove('selected'));
  document.getElementById('drawerTitle').innerHTML='Redigera spelregler';
  document.getElementById('drawerBody').innerHTML=`
    <div class="form-field"><label for="rulesText">Teamets spelregler</label>
    <textarea id="rulesText" style="min-height:300px">Vi respekterar varandras tid och kommer f&ouml;rberedda till m&ouml;ten

Vi ger konstruktiv feedback och tar emot den med &ouml;ppenhet

Vi kommunicerar &ouml;ppet och transparent &mdash; inga dolda agendor

Vi st&ouml;djer varandra och firar framg&aring;ngar tillsammans

Vi h&aring;ller deadlines och kommunicerar tidigt om f&ouml;rseningar

Vi lyssnar aktivt och l&aring;ter alla komma till tals</textarea></div>
    <p style="font-size:13px;color:var(--text-secondary)">Skriv en regel per rad. Reglerna visas som en lista p&aring; sidan.</p>
  `;
  document.getElementById('drawerFooter').innerHTML='<button class="pill-btn secondary" onclick="closeDrawer()">Avbryt</button><button class="pill-btn" onclick="closeDrawer()"><svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg>Spara</button>';
  document.getElementById('drawer').classList.add('open');
  document.getElementById('drawerOverlay').classList.add('open');
}

function closeDrawer(){document.getElementById('drawer').classList.remove('open');document.getElementById('drawerOverlay').classList.remove('open');if(currentItem)currentItem.classList.remove('selected');currentItem=null}
document.addEventListener('keydown',function(e){if(e.key==='Escape')closeDrawer()});
function toggleTheme(){const h=document.documentElement;h.setAttribute('data-theme',h.getAttribute('data-theme')==='dark'?'light':'dark')}
</script>
</body>
</html>

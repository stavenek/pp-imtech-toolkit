<!DOCTYPE html>
<html lang="sv" data-theme="light">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin - Integral Teamwork Toolkit</title>
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{--bg-primary:#ffffff;--bg-secondary:#f5f5f7;--bg-tertiary:#ebebed;--bg-sidebar:#1d1d1f;--text-primary:#1d1d1f;--text-secondary:#86868b;--text-sidebar:#f5f5f7;--border:#d2d2d7;--border-light:#e8e8ed;--accent:#0071e3;--accent-hover:#0077ed;--accent-light:rgba(0,113,227,0.08);--success:#34c759;--warning:#ff9f0a;--error:#ff3b30;--space-xs:4px;--space-sm:8px;--space-md:16px;--space-lg:24px;--space-xl:32px;--space-2xl:48px;--radius-sm:8px;--radius-md:12px;--radius-lg:16px;--radius-xl:20px;--radius-full:9999px;--shadow-sm:0 1px 3px rgba(0,0,0,0.06);--shadow-md:0 4px 16px rgba(0,0,0,0.08);--shadow-drawer:-4px 0 24px rgba(0,0,0,0.1);--sidebar-width:68px;--font-family:-apple-system,BlinkMacSystemFont,'SF Pro Display','Segoe UI',Roboto,sans-serif}
[data-theme="dark"]{--bg-primary:#1c1c1e;--bg-secondary:#2c2c2e;--bg-tertiary:#3a3a3c;--bg-sidebar:#000000;--text-primary:#f5f5f7;--text-secondary:#98989d;--border:#48484a;--border-light:#38383a;--accent:#0a84ff;--accent-hover:#409cff}
body{font-family:var(--font-family);background:var(--bg-secondary);color:var(--text-primary);line-height:1.5;display:flex;min-height:100vh}
a{color:inherit;text-decoration:none}
.skip-link{position:absolute;top:-100%;left:var(--space-md);background:var(--accent);color:#fff;padding:var(--space-sm) var(--space-md);border-radius:var(--radius-full);z-index:1000;font-size:14px;transition:top 0.2s ease}
.skip-link:focus{top:var(--space-md)}
.sidebar{width:var(--sidebar-width);min-height:100vh;background:var(--bg-sidebar);display:flex;flex-direction:column;align-items:center;padding:var(--space-md) 0;position:fixed;top:0;left:0;z-index:100}
.sidebar-logo{width:36px;height:36px;background:var(--accent);border-radius:var(--radius-sm);display:flex;align-items:center;justify-content:center;margin-bottom:var(--space-lg)}
.sidebar-logo svg{width:20px;height:20px;fill:#fff}
.sidebar-nav{display:flex;flex-direction:column;gap:var(--space-xs);flex:1;width:100%;padding:0 var(--space-sm)}
.sidebar-nav a{width:52px;height:52px;display:flex;align-items:center;justify-content:center;border-radius:var(--radius-md);transition:background 0.2s ease,opacity 0.2s ease;opacity:0.4;position:relative;margin:0 auto}
.sidebar-nav a:hover,.sidebar-nav a:focus-visible{opacity:0.7;background:rgba(255,255,255,0.08)}
.sidebar-nav a.active{opacity:1;background:rgba(255,255,255,0.12)}
.sidebar-nav a svg{width:22px;height:22px;fill:var(--text-sidebar)}
.sidebar-nav a .tooltip{position:absolute;left:calc(100% + 12px);top:50%;transform:translateY(-50%);background:var(--bg-primary);color:var(--text-primary);padding:6px 12px;border-radius:var(--radius-sm);font-size:13px;white-space:nowrap;box-shadow:var(--shadow-md);opacity:0;pointer-events:none;transition:opacity 0.2s ease;z-index:200}
.sidebar-nav a:hover .tooltip,.sidebar-nav a:focus-visible .tooltip{opacity:1}
.sidebar-bottom{padding:var(--space-sm);width:100%;display:flex;flex-direction:column;align-items:center;gap:var(--space-sm)}
.theme-toggle{width:44px;height:44px;display:flex;align-items:center;justify-content:center;border:none;background:rgba(255,255,255,0.08);border-radius:var(--radius-md);cursor:pointer;transition:background 0.2s ease}
.theme-toggle:hover{background:rgba(255,255,255,0.15)}
.theme-toggle svg{width:20px;height:20px;fill:var(--text-sidebar)}

.layout{margin-left:var(--sidebar-width);flex:1;display:flex;min-height:100vh}
.main-content{flex:1;padding:var(--space-xl) var(--space-2xl);overflow-x:auto}
.page-header{margin-bottom:var(--space-lg);display:flex;align-items:flex-start;justify-content:space-between}
.page-header div h1{font-size:28px;font-weight:700;letter-spacing:-0.5px;margin-bottom:var(--space-xs)}
.page-header div p{color:var(--text-secondary);font-size:15px}
.pill-btn{display:inline-flex;align-items:center;gap:var(--space-sm);padding:10px 20px;border-radius:var(--radius-full);background:var(--accent);color:#fff;border:none;font-size:14px;font-weight:500;cursor:pointer;transition:background 0.2s ease,transform 0.1s ease;font-family:var(--font-family);min-height:44px}
.pill-btn:hover{background:var(--accent-hover)}
.pill-btn:active{transform:scale(0.98)}
.pill-btn.secondary{background:var(--bg-primary);color:var(--text-primary);border:1px solid var(--border)}
.pill-btn.secondary:hover{background:var(--bg-secondary)}
.pill-btn.danger{background:var(--error);color:#fff}
.pill-btn.danger:hover{background:#e0342c}
.pill-btn svg{width:16px;height:16px;fill:currentColor}

/* Filter pills */
.filter-bar{display:flex;align-items:center;gap:var(--space-sm);margin-bottom:var(--space-lg);flex-wrap:wrap}
.filter-pill{padding:8px 16px;border-radius:var(--radius-full);background:var(--bg-primary);border:1px solid var(--border);color:var(--text-secondary);font-size:13px;font-weight:500;cursor:pointer;transition:all 0.2s ease;font-family:var(--font-family);min-height:36px}
.filter-pill:hover{border-color:var(--accent);color:var(--accent)}
.filter-pill.active{background:var(--accent);color:#fff;border-color:var(--accent)}
.search-pill{padding:8px 16px;border-radius:var(--radius-full);background:var(--bg-primary);border:1px solid var(--border);color:var(--text-primary);font-size:14px;font-family:var(--font-family);min-width:240px;min-height:44px;transition:border-color 0.2s ease}
.search-pill:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 3px var(--accent-light)}

/* User Table */
.table-wrap{background:var(--bg-primary);border-radius:var(--radius-lg);border:1px solid var(--border-light);overflow:hidden}
table{width:100%;border-collapse:collapse}
thead th{background:var(--bg-secondary);padding:var(--space-sm) var(--space-md);font-size:12px;font-weight:600;text-transform:uppercase;letter-spacing:0.5px;color:var(--text-secondary);text-align:left;border-bottom:1px solid var(--border-light)}
tbody tr{border-bottom:1px solid var(--border-light);cursor:pointer;transition:background 0.15s ease}
tbody tr:last-child{border-bottom:none}
tbody tr:hover{background:var(--accent-light)}
tbody tr.selected{background:var(--accent-light);border-left:3px solid var(--accent)}
tbody td{padding:var(--space-md);font-size:14px;vertical-align:middle}
.user-cell{display:flex;align-items:center;gap:var(--space-sm)}
.avatar{width:36px;height:36px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:13px;font-weight:600;color:#fff;flex-shrink:0}
.user-name{font-weight:500}
.user-email{font-size:12px;color:var(--text-secondary)}
.role-badge{display:inline-block;padding:4px 12px;border-radius:var(--radius-full);font-size:12px;font-weight:500}
.role-badge.admin{background:rgba(0,113,227,0.1);color:var(--accent)}
.role-badge.leader{background:rgba(175,82,222,0.1);color:#af52de}
.role-badge.member{background:var(--bg-tertiary);color:var(--text-secondary)}
.role-badge.super{background:rgba(255,159,10,0.1);color:var(--warning)}
.status-dot{width:8px;height:8px;border-radius:50%;display:inline-block;margin-right:6px}
.status-dot.active{background:var(--success)}
.status-dot.inactive{background:var(--text-secondary)}

/* Drawer */
.drawer-overlay{position:fixed;top:0;right:0;bottom:0;left:var(--sidebar-width);background:rgba(0,0,0,0.2);z-index:50;opacity:0;pointer-events:none;transition:opacity 0.3s ease}
.drawer-overlay.open{opacity:1;pointer-events:auto}
.drawer{position:fixed;top:0;right:0;width:520px;height:100vh;background:var(--bg-primary);box-shadow:var(--shadow-drawer);z-index:60;transform:translateX(100%);transition:transform 0.3s ease;display:flex;flex-direction:column;overflow:hidden}
.drawer.open{transform:translateX(0)}
.drawer-header{display:flex;align-items:center;justify-content:space-between;padding:var(--space-lg);border-bottom:1px solid var(--border-light)}
.drawer-header h2{font-size:18px;font-weight:600}
.drawer-close{width:44px;height:44px;display:flex;align-items:center;justify-content:center;border:none;background:var(--bg-secondary);border-radius:50%;cursor:pointer;transition:background 0.2s ease}
.drawer-close:hover{background:var(--bg-tertiary)}
.drawer-close svg{width:18px;height:18px;fill:var(--text-primary)}
.drawer-body{flex:1;padding:var(--space-lg);overflow-y:auto}
.drawer-footer{padding:var(--space-md) var(--space-lg);border-top:1px solid var(--border-light);display:flex;gap:var(--space-sm);justify-content:space-between}
.drawer-footer .actions{display:flex;gap:var(--space-sm)}

/* Form fields */
.form-field{margin-bottom:var(--space-lg)}
.form-field label{display:block;font-size:13px;font-weight:600;color:var(--text-secondary);margin-bottom:var(--space-sm);text-transform:uppercase;letter-spacing:0.5px}
.form-field input,.form-field select{width:100%;padding:var(--space-sm) var(--space-md);border:1px solid var(--border);border-radius:var(--radius-md);font-family:var(--font-family);font-size:15px;color:var(--text-primary);background:var(--bg-primary);min-height:44px;transition:border-color 0.2s ease}
.form-field input:focus,.form-field select:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 3px var(--accent-light)}
.form-row{display:grid;grid-template-columns:1fr 1fr;gap:var(--space-md)}

/* iOS Toggle Switch */
.toggle-row{display:flex;align-items:center;justify-content:space-between;padding:var(--space-md) 0;border-bottom:1px solid var(--border-light)}
.toggle-row:last-child{border-bottom:none}
.toggle-label{font-size:14px;font-weight:500}
.toggle-desc{font-size:12px;color:var(--text-secondary);margin-top:2px}
.ios-toggle{position:relative;width:51px;height:31px;flex-shrink:0}
.ios-toggle input{opacity:0;width:0;height:0;position:absolute}
.ios-toggle .slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background:var(--bg-tertiary);border-radius:31px;transition:background 0.3s ease}
.ios-toggle .slider::before{content:'';position:absolute;height:27px;width:27px;left:2px;bottom:2px;background:#fff;border-radius:50%;transition:transform 0.3s ease;box-shadow:0 1px 3px rgba(0,0,0,0.2)}
.ios-toggle input:checked + .slider{background:var(--success)}
.ios-toggle input:checked + .slider::before{transform:translateX(20px)}
.ios-toggle input:focus-visible + .slider{box-shadow:0 0 0 3px var(--accent-light)}

/* Role Chip Selector */
.chip-selector{display:flex;flex-wrap:wrap;gap:var(--space-sm)}
.role-chip{padding:8px 16px;border-radius:var(--radius-full);background:var(--bg-secondary);border:2px solid transparent;color:var(--text-secondary);font-size:14px;font-weight:500;cursor:pointer;transition:all 0.2s ease;font-family:var(--font-family);min-height:40px;display:flex;align-items:center;gap:6px}
.role-chip:hover{border-color:var(--accent);color:var(--accent)}
.role-chip.selected{background:var(--accent-light);border-color:var(--accent);color:var(--accent)}
.role-chip svg{width:16px;height:16px;fill:currentColor;display:none}
.role-chip.selected svg{display:block}

/* User profile header in drawer */
.user-profile{display:flex;align-items:center;gap:var(--space-md);margin-bottom:var(--space-xl);padding-bottom:var(--space-lg);border-bottom:1px solid var(--border-light)}
.user-profile .avatar{width:56px;height:56px;font-size:20px}
.user-profile-info .name{font-size:18px;font-weight:600}
.user-profile-info .email{font-size:14px;color:var(--text-secondary)}

.section-label{font-size:14px;font-weight:600;margin-bottom:var(--space-md);margin-top:var(--space-lg)}
.section-label:first-child{margin-top:0}
</style>
</head>
<body>

<a href="#main" class="skip-link">Hoppa till huvudinneh&aring;ll</a>

<nav class="sidebar" aria-label="Huvudnavigering">
  <div class="sidebar-logo" aria-hidden="true"><svg viewBox="0 0 24 24"><path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/></svg></div>
  <div class="sidebar-nav" role="list">
    <a href="index.html" role="listitem" aria-label="Dashboard"><svg viewBox="0 0 24 24"><path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"/></svg><span class="tooltip">Dashboard</span></a>
    <a href="agenda.html" role="listitem" aria-label="Agenda"><svg viewBox="0 0 24 24"><path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM9 10H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2z"/></svg><span class="tooltip">Agenda</span></a>
    <a href="strategic.html" role="listitem" aria-label="Strategiskt resonemang"><svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/></svg><span class="tooltip">Strategiskt resonemang</span></a>
    <a href="desired-state.html" role="listitem" aria-label="&Ouml;nskat l&auml;ge"><svg viewBox="0 0 24 24"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg><span class="tooltip">&Ouml;nskat l&auml;ge</span></a>
    <a href="goals-metrics.html" role="listitem" aria-label="M&aring;l &amp; M&auml;tetal"><svg viewBox="0 0 24 24"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/></svg><span class="tooltip">M&aring;l &amp; M&auml;tetal</span></a>
    <a href="action-plan.html" role="listitem" aria-label="Handlingsplan"><svg viewBox="0 0 24 24"><path d="M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zm-1 7V3.5L18.5 9H13zM7 13h10v2H7v-2zm0 4h7v2H7v-2z"/></svg><span class="tooltip">Handlingsplan</span></a>
    <a href="documents.html" role="listitem" aria-label="Dokument"><svg viewBox="0 0 24 24"><path d="M20 6h-8l-2-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 12H4V8h16v10z"/></svg><span class="tooltip">Dokument</span></a>
    <a href="attendance.html" role="listitem" aria-label="N&auml;rvaro"><svg viewBox="0 0 24 24"><path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/></svg><span class="tooltip">N&auml;rvaro</span></a>
    <a href="reflections.html" role="listitem" aria-label="Reflektioner"><svg viewBox="0 0 24 24"><path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z"/></svg><span class="tooltip">Reflektioner</span></a>
    <a href="newsflash.html" role="listitem" aria-label="Nyheter"><svg viewBox="0 0 24 24"><path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 14H4V8l8 5 8-5v10zm-8-7L4 6h16l-8 5z"/></svg><span class="tooltip">Nyheter</span></a>
    <a href="admin.html" class="active" role="listitem" aria-label="Admin" aria-current="page"><svg viewBox="0 0 24 24"><path d="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 00.12-.61l-1.92-3.32a.49.49 0 00-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 00-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96a.49.49 0 00-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.07.62-.07.94s.02.64.07.94l-2.03 1.58a.49.49 0 00-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"/></svg><span class="tooltip">Admin</span></a>
  </div>
  <div class="sidebar-bottom"><button class="theme-toggle" onclick="toggleTheme()" aria-label="V&auml;xla tema"><svg viewBox="0 0 24 24"><path d="M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1z"/></svg></button></div>
</nav>

<div class="layout">
  <main class="main-content" id="main">
    <header class="page-header">
      <div>
        <h1>Admin &amp; Anv&auml;ndarhantering</h1>
        <p>Hantera anv&auml;ndare, roller och beh&ouml;righeter</p>
      </div>
      <button class="pill-btn" onclick="openInviteDrawer()">
        <svg viewBox="0 0 24 24"><path d="M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm-9-2V7H4v3H1v2h3v3h2v-3h3v-2H6zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>
        Bjud in anv&auml;ndare
      </button>
    </header>

    <!-- Filter bar -->
    <div class="filter-bar">
      <input type="search" class="search-pill" placeholder="S&ouml;k anv&auml;ndare..." aria-label="S&ouml;k anv&auml;ndare" onkeyup="filterUsers(this.value)">
      <button class="filter-pill active" onclick="filterRole(this,'all')">Alla</button>
      <button class="filter-pill" onclick="filterRole(this,'super')">Super Admin</button>
      <button class="filter-pill" onclick="filterRole(this,'admin')">Admin</button>
      <button class="filter-pill" onclick="filterRole(this,'leader')">Teamledare</button>
      <button class="filter-pill" onclick="filterRole(this,'member')">Medlem</button>
    </div>

    <div class="table-wrap">
      <table>
        <thead>
          <tr>
            <th>Anv&auml;ndare</th>
            <th>Roll</th>
            <th>Status</th>
            <th>Senast aktiv</th>
          </tr>
        </thead>
        <tbody id="userTable">
          <tr onclick="openUserDrawer(this,'u1')" data-role="leader" data-name="anna karlsson">
            <td>
              <div class="user-cell">
                <div class="avatar" style="background:#0071e3">AK</div>
                <div><div class="user-name">Anna Karlsson</div><div class="user-email">anna.karlsson@foretag.se</div></div>
              </div>
            </td>
            <td><span class="role-badge leader">Teamledare</span></td>
            <td><span class="status-dot active"></span>Aktiv</td>
            <td>Idag</td>
          </tr>
          <tr onclick="openUserDrawer(this,'u2')" data-role="member" data-name="erik lindqvist">
            <td>
              <div class="user-cell">
                <div class="avatar" style="background:#34c759">EL</div>
                <div><div class="user-name">Erik Lindqvist</div><div class="user-email">erik.lindqvist@foretag.se</div></div>
              </div>
            </td>
            <td><span class="role-badge member">Medlem</span></td>
            <td><span class="status-dot active"></span>Aktiv</td>
            <td>Idag</td>
          </tr>
          <tr onclick="openUserDrawer(this,'u3')" data-role="member" data-name="maria svensson">
            <td>
              <div class="user-cell">
                <div class="avatar" style="background:#ff9f0a">MS</div>
                <div><div class="user-name">Maria Svensson</div><div class="user-email">maria.svensson@foretag.se</div></div>
              </div>
            </td>
            <td><span class="role-badge member">Medlem</span></td>
            <td><span class="status-dot active"></span>Aktiv</td>
            <td>Ig&aring;r</td>
          </tr>
          <tr onclick="openUserDrawer(this,'u4')" data-role="member" data-name="johan persson">
            <td>
              <div class="user-cell">
                <div class="avatar" style="background:#af52de">JP</div>
                <div><div class="user-name">Johan Persson</div><div class="user-email">johan.persson@foretag.se</div></div>
              </div>
            </td>
            <td><span class="role-badge member">Medlem</span></td>
            <td><span class="status-dot active"></span>Aktiv</td>
            <td>Ig&aring;r</td>
          </tr>
          <tr onclick="openUserDrawer(this,'u5')" data-role="member" data-name="sofia nilsson">
            <td>
              <div class="user-cell">
                <div class="avatar" style="background:#ff3b30">SN</div>
                <div><div class="user-name">Sofia Nilsson</div><div class="user-email">sofia.nilsson@foretag.se</div></div>
              </div>
            </td>
            <td><span class="role-badge member">Medlem</span></td>
            <td><span class="status-dot active"></span>Aktiv</td>
            <td>3 dagar sedan</td>
          </tr>
          <tr onclick="openUserDrawer(this,'u6')" data-role="admin" data-name="karin andersson">
            <td>
              <div class="user-cell">
                <div class="avatar" style="background:#5856d6">KA</div>
                <div><div class="user-name">Karin Andersson</div><div class="user-email">karin.andersson@foretag.se</div></div>
              </div>
            </td>
            <td><span class="role-badge admin">Admin</span></td>
            <td><span class="status-dot active"></span>Aktiv</td>
            <td>Idag</td>
          </tr>
          <tr onclick="openUserDrawer(this,'u7')" data-role="super" data-name="magnus berg">
            <td>
              <div class="user-cell">
                <div class="avatar" style="background:#636366">MB</div>
                <div><div class="user-name">Magnus Berg</div><div class="user-email">magnus.berg@integ.se</div></div>
              </div>
            </td>
            <td><span class="role-badge super">Super Admin</span></td>
            <td><span class="status-dot active"></span>Aktiv</td>
            <td>Idag</td>
          </tr>
          <tr onclick="openUserDrawer(this,'u8')" data-role="member" data-name="lisa ek">
            <td>
              <div class="user-cell">
                <div class="avatar" style="background:#86868b">LE</div>
                <div><div class="user-name">Lisa Ek</div><div class="user-email">lisa.ek@foretag.se</div></div>
              </div>
            </td>
            <td><span class="role-badge member">Medlem</span></td>
            <td><span class="status-dot inactive"></span>Inbjuden</td>
            <td>&mdash;</td>
          </tr>
        </tbody>
      </table>
    </div>
  </main>
</div>

<div class="drawer-overlay" id="drawerOverlay" onclick="closeDrawer()"></div>
<aside class="drawer" id="drawer" role="dialog" aria-label="Anv&auml;ndardetaljer">
  <div class="drawer-header">
    <h2 id="drawerTitle">Anv&auml;ndare</h2>
    <button class="drawer-close" onclick="closeDrawer()" aria-label="St&auml;ng panel"><svg viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg></button>
  </div>
  <div class="drawer-body" id="drawerBody"></div>
  <div class="drawer-footer" id="drawerFooter">
    <button class="pill-btn secondary" onclick="closeDrawer()">Avbryt</button>
    <div class="actions">
      <button class="pill-btn" onclick="closeDrawer()">
        <svg viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg>
        Spara
      </button>
    </div>
  </div>
</aside>

<script>
const userData = {
  u1:{name:'Anna Karlsson',email:'anna.karlsson@foretag.se',initials:'AK',color:'#0071e3',role:'leader',active:true,permissions:{edit:true,invite:true,docs:true,metrics:true,admin:false}},
  u2:{name:'Erik Lindqvist',email:'erik.lindqvist@foretag.se',initials:'EL',color:'#34c759',role:'member',active:true,permissions:{edit:true,invite:false,docs:true,metrics:true,admin:false}},
  u3:{name:'Maria Svensson',email:'maria.svensson@foretag.se',initials:'MS',color:'#ff9f0a',role:'member',active:true,permissions:{edit:true,invite:false,docs:true,metrics:true,admin:false}},
  u4:{name:'Johan Persson',email:'johan.persson@foretag.se',initials:'JP',color:'#af52de',role:'member',active:true,permissions:{edit:true,invite:false,docs:true,metrics:false,admin:false}},
  u5:{name:'Sofia Nilsson',email:'sofia.nilsson@foretag.se',initials:'SN',color:'#ff3b30',role:'member',active:true,permissions:{edit:true,invite:false,docs:true,metrics:false,admin:false}},
  u6:{name:'Karin Andersson',email:'karin.andersson@foretag.se',initials:'KA',color:'#5856d6',role:'admin',active:true,permissions:{edit:true,invite:true,docs:true,metrics:true,admin:true}},
  u7:{name:'Magnus Berg',email:'magnus.berg@integ.se',initials:'MB',color:'#636366',role:'super',active:true,permissions:{edit:true,invite:true,docs:true,metrics:true,admin:true}},
  u8:{name:'Lisa Ek',email:'lisa.ek@foretag.se',initials:'LE',color:'#86868b',role:'member',active:false,permissions:{edit:true,invite:false,docs:true,metrics:false,admin:false}}
};

const roleLabels = {super:'Super Admin',admin:'Admin',leader:'Teamledare',member:'Medlem'};
let currentRow = null;

function openUserDrawer(el, id) {
  const u = userData[id];
  if (!u) return;
  document.querySelectorAll('tbody tr').forEach(r=>r.classList.remove('selected'));
  el.classList.add('selected');
  currentRow = el;

  document.getElementById('drawerTitle').textContent = 'Redigera anv\u00e4ndare';
  document.getElementById('drawerBody').innerHTML = `
    <div class="user-profile">
      <div class="avatar" style="background:${u.color}">${u.initials}</div>
      <div class="user-profile-info">
        <div class="name">${u.name}</div>
        <div class="email">${u.email}</div>
      </div>
    </div>

    <div class="form-row">
      <div class="form-field"><label for="editName">Namn</label><input type="text" id="editName" value="${u.name}"></div>
      <div class="form-field"><label for="editEmail">E-post</label><input type="email" id="editEmail" value="${u.email}"></div>
    </div>

    <div class="form-field">
      <label>Roll</label>
      <div class="chip-selector" id="roleChips">
        ${Object.entries(roleLabels).map(([key, label]) => `
          <div class="role-chip ${u.role===key?'selected':''}" onclick="selectRole(this,'${key}')">
            <svg viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg>
            ${label}
          </div>
        `).join('')}
      </div>
    </div>

    <div class="section-label">Beh&ouml;righeter</div>
    <div class="toggle-row">
      <div><div class="toggle-label">Redigera inneh&aring;ll</div><div class="toggle-desc">Kan redigera teamets inneh&aring;ll och &aring;tg&auml;rder</div></div>
      <label class="ios-toggle"><input type="checkbox" ${u.permissions.edit?'checked':''}><span class="slider"></span></label>
    </div>
    <div class="toggle-row">
      <div><div class="toggle-label">Bjuda in anv&auml;ndare</div><div class="toggle-desc">Kan bjuda in nya teammedlemmar via e-post</div></div>
      <label class="ios-toggle"><input type="checkbox" ${u.permissions.invite?'checked':''}><span class="slider"></span></label>
    </div>
    <div class="toggle-row">
      <div><div class="toggle-label">Hantera dokument</div><div class="toggle-desc">Kan ladda upp och ta bort dokument</div></div>
      <label class="ios-toggle"><input type="checkbox" ${u.permissions.docs?'checked':''}><span class="slider"></span></label>
    </div>
    <div class="toggle-row">
      <div><div class="toggle-label">Uppdatera m&auml;tetal</div><div class="toggle-desc">Kan l&auml;gga till och redigera m&auml;tetal</div></div>
      <label class="ios-toggle"><input type="checkbox" ${u.permissions.metrics?'checked':''}><span class="slider"></span></label>
    </div>
    <div class="toggle-row">
      <div><div class="toggle-label">Administrera teamet</div><div class="toggle-desc">Full &aring;tkomst till admin och inst&auml;llningar</div></div>
      <label class="ios-toggle"><input type="checkbox" ${u.permissions.admin?'checked':''}><span class="slider"></span></label>
    </div>
  `;
  document.getElementById('drawerFooter').innerHTML = `
    <button class="pill-btn danger" style="font-size:13px;padding:8px 16px;min-height:38px" onclick="closeDrawer()">Ta bort</button>
    <div class="actions">
      <button class="pill-btn secondary" onclick="closeDrawer()">Avbryt</button>
      <button class="pill-btn" onclick="closeDrawer()"><svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg>Spara</button>
    </div>
  `;
  document.getElementById('drawer').classList.add('open');
  document.getElementById('drawerOverlay').classList.add('open');
}

function openInviteDrawer() {
  document.querySelectorAll('tbody tr').forEach(r=>r.classList.remove('selected'));
  document.getElementById('drawerTitle').textContent = 'Bjud in anv\u00e4ndare';
  document.getElementById('drawerBody').innerHTML = `
    <p style="font-size:14px;color:var(--text-secondary);margin-bottom:24px">Skicka en inbjudan via e-post. Mottagaren f&aring;r en l&auml;nk f&ouml;r att g&aring; med i teamet.</p>
    <div class="form-field"><label for="invEmail">E-postadress</label><input type="email" id="invEmail" placeholder="namn@foretag.se"></div>
    <div class="form-row">
      <div class="form-field"><label for="invFirst">F&ouml;rnamn</label><input type="text" id="invFirst" placeholder="F&ouml;rnamn"></div>
      <div class="form-field"><label for="invLast">Efternamn</label><input type="text" id="invLast" placeholder="Efternamn"></div>
    </div>
    <div class="form-field">
      <label>Roll</label>
      <div class="chip-selector" id="roleChips">
        <div class="role-chip" onclick="selectRole(this,'super')"><svg viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg>Super Admin</div>
        <div class="role-chip" onclick="selectRole(this,'admin')"><svg viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg>Admin</div>
        <div class="role-chip" onclick="selectRole(this,'leader')"><svg viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg>Teamledare</div>
        <div class="role-chip selected" onclick="selectRole(this,'member')"><svg viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg>Medlem</div>
      </div>
    </div>

    <div class="section-label">Beh&ouml;righeter</div>
    <div class="toggle-row">
      <div><div class="toggle-label">Redigera inneh&aring;ll</div><div class="toggle-desc">Kan redigera teamets inneh&aring;ll</div></div>
      <label class="ios-toggle"><input type="checkbox" checked><span class="slider"></span></label>
    </div>
    <div class="toggle-row">
      <div><div class="toggle-label">Bjuda in anv&auml;ndare</div><div class="toggle-desc">Kan bjuda in nya teammedlemmar</div></div>
      <label class="ios-toggle"><input type="checkbox"><span class="slider"></span></label>
    </div>
    <div class="toggle-row">
      <div><div class="toggle-label">Hantera dokument</div><div class="toggle-desc">Kan ladda upp och ta bort dokument</div></div>
      <label class="ios-toggle"><input type="checkbox" checked><span class="slider"></span></label>
    </div>
    <div class="toggle-row">
      <div><div class="toggle-label">Uppdatera m&auml;tetal</div><div class="toggle-desc">Kan l&auml;gga till och redigera m&auml;tetal</div></div>
      <label class="ios-toggle"><input type="checkbox"><span class="slider"></span></label>
    </div>
    <div class="toggle-row">
      <div><div class="toggle-label">Administrera teamet</div><div class="toggle-desc">Full &aring;tkomst till admin</div></div>
      <label class="ios-toggle"><input type="checkbox"><span class="slider"></span></label>
    </div>
  `;
  document.getElementById('drawerFooter').innerHTML = `
    <button class="pill-btn secondary" onclick="closeDrawer()">Avbryt</button>
    <div class="actions">
      <button class="pill-btn" onclick="closeDrawer()"><svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor"><path d="M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm-9-2V7H4v3H1v2h3v3h2v-3h3v-2H6zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>Skicka inbjudan</button>
    </div>
  `;
  document.getElementById('drawer').classList.add('open');
  document.getElementById('drawerOverlay').classList.add('open');
}

function selectRole(chip, role) {
  chip.closest('.chip-selector').querySelectorAll('.role-chip').forEach(c=>c.classList.remove('selected'));
  chip.classList.add('selected');
}

function closeDrawer(){
  document.getElementById('drawer').classList.remove('open');
  document.getElementById('drawerOverlay').classList.remove('open');
  if(currentRow) currentRow.classList.remove('selected');
  currentRow = null;
}

function filterRole(btn, role) {
  document.querySelectorAll('.filter-pill').forEach(p=>p.classList.remove('active'));
  btn.classList.add('active');
  document.querySelectorAll('#userTable tr').forEach(row => {
    row.style.display = (role === 'all' || row.dataset.role === role) ? '' : 'none';
  });
}

function filterUsers(query) {
  const q = query.toLowerCase();
  document.querySelectorAll('#userTable tr').forEach(row => {
    row.style.display = row.dataset.name.includes(q) ? '' : 'none';
  });
}

document.addEventListener('keydown', function(e) { if (e.key === 'Escape') closeDrawer(); });
function toggleTheme(){const h=document.documentElement;h.setAttribute('data-theme',h.getAttribute('data-theme')==='dark'?'light':'dark')}
</script>
</body>
</html>
